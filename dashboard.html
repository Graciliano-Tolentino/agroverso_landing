<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- üîí Metadados institucionais e t√©cnicos -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>Painel ‚Ä¢ Agroverso</title>
  <meta name="description" content="Painel adaptado por perfil de acesso no sistema Agroverso. Veja fun√ß√µes exclusivas conforme seu tipo de usu√°rio." />
  <meta name="author" content="Instituto Graciliana Maria da Concei√ß√£o" />
  <meta name="robots" content="noindex, nofollow" />
  <link rel="stylesheet" href="assets/css/dashboard.css" />
  <link rel="icon" href="assets/favicon.ico" />
</head>
<body class="dashboard-body">

  <main class="dashboard-container" role="main" aria-label="Painel do Usu√°rio Agroverso">
    <section class="dashboard-box" aria-labelledby="painel-titulo">
      <h1 id="painel-titulo" class="dashboard-title">üéØ Painel Personalizado Agroverso</h1>

      <p class="dashboard-subtitle" id="subtitulo-perfil">
        Este painel foi ajustado dinamicamente conforme seu tipo de usu√°rio.
      </p>

      <div id="mensagem-perfil" class="dashboard-message" role="region" aria-live="polite">
        <!-- Conte√∫do personalizado ser√° injetado aqui via JS -->
      </div>

      <div class="dashboard-footer">
        <button onclick="sair()" class="btn-secondary" aria-label="Encerrar sess√£o e retornar ao login">üö™ Sair</button>
      </div>
    </section>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const mensagemEl = document.getElementById("mensagem-perfil");
      const subtitulo = document.getElementById("subtitulo-perfil");

      const perfil = sessionStorage.getItem("usuario_perfil")?.toLowerCase();
      const email = sessionStorage.getItem("usuario_email");

      // üõ°Ô∏è Prote√ß√£o contra acesso n√£o autorizado
      if (!perfil || !email) {
        alert("‚ö†Ô∏è Acesso n√£o autorizado ou sess√£o expirada. Fa√ßa login novamente.");
        window.location.href = "login.html";
        return;
      }

      // üîç Conte√∫do din√¢mico por perfil
      const conteudos = {
        administrador: {
          titulo: "üëë Administrador Geral",
          texto: `
            Voc√™ possui acesso irrestrito ao sistema.  
            <ul>
              <li>Gerenciar usu√°rios e permiss√µes</li>
              <li>Visualizar relat√≥rios e gr√°ficos anal√≠ticos</li>
              <li>Acompanhar projetos e integra√ß√£o sist√™mica</li>
              <li>Manuten√ß√£o da infraestrutura e configura√ß√µes globais</li>
            </ul>`
        },
        gerente: {
          titulo: "üìä Gerente",
          texto: `
            Seu painel permite vis√£o operacional e estrat√©gica.  
            <ul>
              <li>Coordena√ß√£o de equipes e valida√ß√£o de entregas</li>
              <li>Controle de produ√ß√£o e fluxos de aprova√ß√£o</li>
              <li>Gera√ß√£o de relat√≥rios e intera√ß√£o com a diretoria</li>
            </ul>`
        },
        lider: {
          titulo: "üß≠ L√≠der de Equipe",
          texto: `
            Voc√™ pode distribuir tarefas, acompanhar execu√ß√µes e validar dados em campo.  
            <ul>
              <li>Atribui√ß√£o de ordens de servi√ßo</li>
              <li>Supervis√£o de t√©cnicos em campo</li>
              <li>Envio de relat√≥rios e imagens georreferenciadas</li>
            </ul>`
        },
        tecnico: {
          titulo: "üîß T√©cnico de Campo",
          texto: `
            Seu painel est√° focado em execu√ß√£o pr√°tica e mobilidade.  
            <ul>
              <li>Envio de fotos, v√≠deos e medi√ß√µes de campo</li>
              <li>Execu√ß√£o de ordens de servi√ßo e feedbacks</li>
              <li>Atualiza√ß√£o de sensores e relat√≥rios de anomalias</li>
            </ul>`
        }
      };

      // ‚úÖ Renderiza conte√∫do ou fallback
      if (conteudos[perfil]) {
        const c = conteudos[perfil];
        mensagemEl.innerHTML = `<h2>${c.titulo}</h2><div class="perfil-texto">${c.texto}</div>`;
      } else {
        mensagemEl.innerHTML = `
          <h2>‚ö†Ô∏è Perfil n√£o reconhecido</h2>
          <p>N√£o foi poss√≠vel identificar seu perfil de acesso. <a href="login.html">Voltar ao login</a>.</p>
        `;
        subtitulo.textContent = "Erro de identifica√ß√£o de sess√£o.";
      }
    });

    // üîö Encerra a sess√£o
    function sair() {
      sessionStorage.clear();
      window.location.href = "login.html";
    }
  </script>

</body>
</html>
